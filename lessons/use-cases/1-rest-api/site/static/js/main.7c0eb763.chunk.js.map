{"version":3,"sources":["assets/deploy-to-netlify.svg","assets/logo.svg","assets/github.svg","components/ContentEditable/Editable.js","components/ContentEditable/index.js","components/AppHeader/index.js","components/SettingsMenu/index.js","components/SettingsIcon/index.js","utils/api.js","App.js","utils/isLocalHost.js","utils/sortByDate.js","index.js"],"names":["module","exports","__webpack_require__","p","Editable","preventEnter","evt","which","preventDefault","_this","htmlEl","blur","emitChange","html","innerHTML","props","onChange","lastHtml","target","value","nextProps","this","disabled","_this2","_this$props","tagName","Object","objectWithoutProperties","domNodeType","elementProps","objectSpread","ref","e","onKeyDown","onInput","onBlur","contentEditable","children","dangerouslySetInnerHTML","__html","React","createElement","Component","ContentEditable","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleClick","event","window","persist","hasFocused","caretRange","range","x","clientX","y","clientY","document","body","createTextRange","moveToPoint","createRange","rangeParent","setStart","rangeOffset","collapse","caretPositionFromPoint","pos","offsetNode","offset","caretRangeFromPoint","getMouseEventCaretRange","setTimeout","select","getSelection","sel","removeAllRanges","addRange","selectRange","setState","handleClickOutside","innerText","state","editKey","content","react_default","a","Editable_Editable","data-key","className","onClick","AppHeader","src","logo","alt","rel","href","deployButton","github","Menu","handleEscKey","showMenu","handleModalClose","handleDelete","confirm","console","log","handleClearCompleted","addEventListener","removeEventListener","showOrHide","style","display","role","aria-label","data-setting","changeSetting","data-value","SettingIcon","concat","xmlns","viewBox","xlinkHref","api","create","data","fetch","JSON","stringify","method","then","response","json","readAll","update","todoId","delete","batchDelete","todoIds","ids","App","todos","saveTodo","todoValue","inputElement","alert","focus","todoInfo","title","completed","optimisticTodoState","ts","Date","getTime","persistedState","removeOptimisticTodo","catch","revertedState","deleteTodo","dataset","id","filteredTodos","reduce","acc","current","getTodoId","rollbackTodo","optimisticState","handleTodoCheckbox","todoCompleted","checked","updatedTodos","map","todo","i","updateTodoTitle","currentValue","isDifferent","key","clearCompleted","completedTodoIds","length","closeModal","openModal","message","isLocalhostName","location","hostname","isLocalhostIPv6","isLocalhostIPv4","match","isLocalHost","_this3","dateKey","order","sortOrder","b","timeA","timeB","sort","deleteButton","data-id","boxIcon","type","components_ContentEditable_ContentEditable","_this4","components_AppHeader","SettingsIcon","onSubmit","placeholder","name","el","autoComplete","marginRight","renderTodos","SettingsMenu_Menu","filter","ReactDOM","render","App_App","getElementById"],"mappings":"iFAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,+DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,iUCGnBC,6MAqBnBC,aAAe,SAACC,GACd,GAAkB,KAAdA,EAAIC,MAEN,OADAD,EAAIE,mBACCC,EAAKC,SAGVD,EAAKC,OAAOC,QACL,MAGXC,WAAa,SAACN,GACZ,IAAKG,EAAKC,OACR,OAAO,EAET,IAAMG,EAAOJ,EAAKC,OAAOI,UACrBL,EAAKM,MAAMC,UAAYH,IAASJ,EAAKQ,WACvCX,EAAIY,OAAOC,MAAQN,EACnBJ,EAAKM,MAAMC,SAASV,EAAKO,IAE3BJ,EAAKQ,SAAWJ,wFAvCIO,GAGpB,OAEGC,KAAKX,QAEFU,EAAUP,OAASQ,KAAKX,OAAOI,WAC9BM,EAAUP,OAASQ,KAAKN,MAAMF,MAEhCQ,KAAKN,MAAMO,WAAaF,EAAUE,sDAInCD,KAAKX,QAAUW,KAAKN,MAAMF,OAASQ,KAAKX,OAAOI,YAGjDO,KAAKX,OAAOI,UAAYO,KAAKN,MAAMF,uCAwB9B,IAAAU,EAAAF,KAAAG,EACuCH,KAAKN,MAA3CU,EADDD,EACCC,QAASZ,EADVW,EACUX,KAAmBE,GAD7BS,EACgBR,SADhBU,OAAAC,EAAA,EAAAD,CAAAF,EAAA,gCAGDI,EAAcH,GAAW,MACzBI,EAAYH,OAAAI,EAAA,EAAAJ,CAAA,GACbX,EADa,CAEhBgB,IAAK,SAACC,GAAD,OAAOT,EAAKb,OAASsB,GAC1BC,UAAWZ,KAAKhB,aAChB6B,QAASb,KAAKT,WACduB,OAAQd,KAAKN,MAAMoB,QAAUd,KAAKT,WAClCwB,iBAAkBf,KAAKN,MAAMO,WAG3Be,EAAWhB,KAAKN,MAAMsB,SAK1B,OAJIxB,IACFgB,EAAaS,wBAA0B,CAAEC,OAAQ1B,GACjDwB,EAAW,MAENG,IAAMC,cAAcb,EAAaC,EAAcQ,UA5DpBG,IAAME,WCCvBC,qBACnB,SAAAA,EAAY5B,GAAO,IAAAN,EAAA,OAAAiB,OAAAkB,EAAA,EAAAlB,CAAAL,KAAAsB,IACjBlC,EAAAiB,OAAAmB,EAAA,EAAAnB,CAAAL,KAAAK,OAAAoB,EAAA,EAAApB,CAAAiB,GAAAI,KAAA1B,KAAMN,KAMRiC,YAAc,SAAChB,GACbA,EAAExB,iBACF,IAAMyC,EAAQjB,GAAKkB,OAAOD,MAG1B,GADAA,EAAME,WACD1C,EAAK2C,WAAY,CACpB,IAAMC,EA2CZ,SAAiCJ,GAC/B,IAEIK,EAFEC,EAAIN,EAAMO,QACVC,EAAIR,EAAMS,QAGhB,GAAIC,SAASC,KAAKC,iBAEhBP,EAAQK,SAASC,KAAKC,mBAChBC,YAAYP,EAAGE,QAChB,GAAoC,qBAAzBE,SAASI,YAEzB,GAAiC,qBAAtBd,EAAMe,aACfV,EAAQK,SAASI,eACXE,SAAShB,EAAMe,YAAaf,EAAMiB,aACxCZ,EAAMa,UAAS,QACV,GAAIR,SAASS,uBAAwB,CAE1C,IAAMC,EAAMV,SAASS,uBAAuBb,EAAGE,IAC/CH,EAAQK,SAASI,eACXE,SAASI,EAAIC,WAAYD,EAAIE,QACnCjB,EAAMa,UAAS,QACNR,SAASa,sBAElBlB,EAAQK,SAASa,oBAAoBjB,EAAGE,IAG5C,OAAOH,EArEgBmB,CAAwBxB,GAC3CC,OAAOwB,WAAW,YAuExB,SAAqBpB,GACnB,GAAIA,EACF,GAA4B,qBAAjBA,EAAMqB,OACfrB,EAAMqB,cACD,GAAmC,qBAAxBzB,OAAO0B,aAA8B,CACrD,IAAMC,EAAM3B,OAAO0B,eACnBC,EAAIC,kBACJD,EAAIE,SAASzB,IA7EX0B,CAAY3B,GACZ5C,EAAK2C,YAAa,GACjB,GAGL3C,EAAKwE,SAAS,CACZ3D,UAAU,KArBKb,EAwBnByE,mBAAqB,SAAC5E,IACNA,GAAO4C,OAAOD,OAEtBE,UACN,IAAMhC,EAAQb,EAAIY,OAAOC,OAASb,EAAIY,OAAOiE,UAC7C1E,EAAKwE,SAAS,CACZ3D,UAAU,GACT,WACDb,EAAK2C,YAAa,EACd3C,EAAKM,MAAMoB,QACb1B,EAAKM,MAAMoB,OAAO7B,EAAKa,MAhC3BV,EAAK2E,MAAQ,CACX9D,UAAU,GAEZb,EAAK2C,YAAa,EALD3C,wEAsCV,IAAAe,EACgDH,KAAKN,MAApDC,EADDQ,EACCR,SAAUqB,EADXb,EACWa,SAAUxB,EADrBW,EACqBX,KAAMwE,EAD3B7D,EAC2B6D,QAAS5D,EADpCD,EACoCC,QACrC6D,EAAUzE,GAAQwB,EACxB,OACEkD,EAAAC,EAAA/C,cAACgD,EAAD,CACEhE,QAASA,EACTiE,WAAUL,EACVM,UAAW,WACXC,QAASvE,KAAK2B,YACdb,OAAQd,KAAK6D,mBACbrE,KAAMyE,EACNhE,SAAUD,KAAK+D,MAAM9D,SACrBN,SAAUA,WAnD2BwB,IAAME,iECuCpCmD,SArCG,SAAC9E,GACjB,OACEwE,EAAAC,EAAA/C,cAAA,UAAQkD,UAAU,cAChBJ,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,qBACbJ,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,qBACbJ,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,gBACbJ,EAAAC,EAAA/C,cAAA,OAAKqD,IAAKC,IAAMJ,UAAU,WAAWK,IAAI,SACzCT,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,kBACbJ,EAAAC,EAAA/C,cAAA,MAAIkD,UAAU,aAAd,sBACAJ,EAAAC,EAAA/C,cAAA,KAAGkD,UAAU,aAAb,wCAMNJ,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,yBACbJ,EAAAC,EAAA/C,cAAA,KACEvB,OAAO,SACP+E,IAAI,sBACJC,KAAK,sGACLX,EAAAC,EAAA/C,cAAA,OAAKqD,IAAKK,IAAcR,UAAU,gBAAgBK,IAAI,uBAExDT,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,YACbJ,EAAAC,EAAA/C,cAAA,KACEvB,OAAO,SACP+E,IAAI,sBACJC,KAAK,sDACLX,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,cAAcG,IAAKM,IAAQJ,IAAI,wBAJhD,8BC1BSK,oNASnBC,aAAe,SAACtE,GACVvB,EAAKM,MAAMwF,UAAwB,KAAZvE,EAAEzB,OAC3BE,EAAKM,MAAMyF,sBAGfC,aAAe,SAACzE,GACdA,EAAExB,iBACoB0C,OAAOwD,QAAQ,yDAEnCC,QAAQC,IAAI,UACZnG,EAAKM,MAAM8F,4GAhBblD,SAASC,KAAKkD,iBAAiB,UAAWzF,KAAKiF,6DAI/C3C,SAASC,KAAKmD,oBAAoB,UAAW1F,KAAKiF,+CAe3C,IAEDU,EADe3F,KAAKN,MAAlBwF,SACwB,OAAS,OACzC,OACEhB,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,mBAAmBsB,MAAO,CAACC,QAASF,IACjDzB,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,oBACbJ,EAAAC,EAAA/C,cAAA,QAAMkD,UAAU,iBAAiBC,QAASvE,KAAKN,MAAMyF,iBAAkBW,KAAK,MAAMC,aAAW,SAA7F,UAGA7B,EAAAC,EAAA/C,cAAA,sBACA8C,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,mBAAmBC,QAASvE,KAAKoF,cAC9ClB,EAAAC,EAAA/C,cAAA,UAAQkD,UAAU,cAAlB,8BAIFJ,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,mBAAmBsB,MAAO,CAACC,QAAS,SACjD3B,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,mBAAf,eACAJ,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,2BAA2B0B,eAAa,aACrD9B,EAAAC,EAAA/C,cAAA,OACEkD,UAAU,kBACVC,QAASvE,KAAKiG,cACdC,aAAW,QAHb,uBAMAhC,EAAAC,EAAA/C,cAAA,OACEkD,UAAU,kBACVC,QAASvE,KAAKiG,cACdC,aAAW,OAHb,uCA9CoB7E,cCWnB8E,SAXK,SAACzG,GACnB,IAAM4E,EAAY5E,EAAM4E,WAAa,GACrC,OACEJ,EAAAC,EAAA/C,cAAA,QAAMmD,QAAS7E,EAAM6E,QAASD,UAAS,0BAAA8B,OAA4B9B,IACjEJ,EAAAC,EAAA/C,cAAA,OAAKiF,MAAM,6BAA6BC,QAAQ,cAAchC,UAAU,mBACtEJ,EAAAC,EAAA/C,cAAA,OAAKmF,UAAU,YAAYjC,UAAU,sBCqC9BkC,EAAA,CACbC,OA5Ca,SAACC,GACd,OAAOC,MAAM,mCAAoC,CAC/CpE,KAAMqE,KAAKC,UAAUH,GACrBI,OAAQ,SACPC,KAAK,SAAAC,GACN,OAAOA,EAASC,UAwClBC,QApCc,WACd,OAAOP,MAAM,sCAAsCI,KAAK,SAACC,GACvD,OAAOA,EAASC,UAmClBE,OA/Ba,SAACC,EAAQV,GACtB,OAAOC,MAAK,oCAAAP,OAAqCgB,GAAU,CACzD7E,KAAMqE,KAAKC,UAAUH,GACrBI,OAAQ,SACPC,KAAK,SAAAC,GACN,OAAOA,EAASC,UA2BlBI,OAvBiB,SAACD,GAClB,OAAOT,MAAK,oCAAAP,OAAqCgB,GAAU,CACzDN,OAAQ,SACPC,KAAK,SAAAC,GACN,OAAOA,EAASC,UAoBlBK,YAhBsB,SAACC,GACvB,OAAOZ,MAAK,yCAA2C,CACrDpE,KAAMqE,KAAKC,UAAU,CACnBW,IAAKD,IAEPT,OAAQ,SACPC,KAAK,SAAAC,GACN,OAAOA,EAASC,qBC/BCQ,6MACnB1D,MAAQ,CACN2D,MAAO,GACPxC,UAAU,KAoBZyC,SAAW,SAAChH,GACVA,EAAExB,iBADc,IAERuI,EAAUtI,EAAK2E,MAAf2D,MACFE,EAAYxI,EAAKyI,aAAa/H,MAEpC,IAAK8H,EAGH,OAFAE,MAAM,yBACN1I,EAAKyI,aAAaE,SACX,EAIT3I,EAAKyI,aAAa/H,MAAQ,GAE1B,IAAMkI,EAAW,CACfC,MAAOL,EACPM,WAAW,GAQPC,EALe,CAAC,CACpBzB,KAAMsB,EACNI,GAA2B,KAAvB,IAAIC,MAAOC,YAGwBlC,OAAOsB,GAEhDtI,EAAKwE,SAAS,CACZ8D,MAAOS,IAGT3B,EAAIC,OAAOuB,GAAUjB,KAAK,SAACC,GACzB1B,QAAQC,IAAIyB,GAEZ,IAAMuB,EAAiBC,EAAqBd,GAAOtB,OAAOY,GAE1D5H,EAAKwE,SAAS,CACZ8D,MAAOa,MAERE,MAAM,SAAC9H,GACR2E,QAAQC,IAAI,wBAAyB5E,GACrC,IAAM+H,EAAgBF,EAAqBd,GAE3CtI,EAAKwE,SAAS,CACZ8D,MAAOgB,SAIbC,WAAa,SAAChI,GAAM,IACV+G,EAAUtI,EAAK2E,MAAf2D,MACFN,EAASzG,EAAEd,OAAO+I,QAAQC,GAG1BC,EAAgBpB,EAAMqB,OAAO,SAACC,EAAKC,GAEvC,OADkBC,EAAUD,KACV7B,GAEhB4B,EAAIG,aAAeF,EACZD,IAGTA,EAAII,gBAAkBJ,EAAII,gBAAgBhD,OAAO6C,GAC1CD,IACN,CACDG,aAAc,GACdC,gBAAiB,KAGnBhK,EAAKwE,SAAS,CACZ8D,MAAOoB,EAAcM,kBAIvB5C,EAAIa,OAAOD,GAAQL,KAAK,WACtBzB,QAAQC,IAAR,mBAAAa,OAA+BgB,MAC9BqB,MAAM,SAAC9H,GACR2E,QAAQC,IAAR,+BAAAa,OAA2CgB,GAAUzG,GAErDvB,EAAKwE,SAAS,CACZ8D,MAAOoB,EAAcM,gBAAgBhD,OAAO0C,EAAcK,qBAIhEE,mBAAqB,SAACzH,GAAU,IACtB8F,EAAUtI,EAAK2E,MAAf2D,MACA7H,EAAW+B,EAAX/B,OACFyJ,EAAgBzJ,EAAO0J,QACvBnC,EAASvH,EAAO+I,QAAQC,GAExBW,EAAe9B,EAAM+B,IAAI,SAACC,EAAMC,GAAM,IAClCjD,EAASgD,EAAThD,KAKR,OAJWwC,EAAUQ,KACVtC,GAAUV,EAAKwB,YAAcoB,IACtC5C,EAAKwB,UAAYoB,GAEZI,IAGTtK,EAAKwE,SAAS,CACZ8D,MAAO8B,GACN,WACDhD,EAAIW,OAAOC,EAAQ,CACjBc,UAAWoB,IACVvC,KAAK,WACNzB,QAAQC,IAAR,eAAAa,OAA2BgB,GAAUkC,KACpCb,MAAM,SAAC9H,GACR2E,QAAQC,IAAI,wBAAyB5E,UAI3CiJ,gBAAkB,SAAChI,EAAOiI,GACxB,IAAIC,GAAc,EACZ1C,EAASxF,EAAM/B,OAAO+I,QAAQmB,IAE9BP,EAAepK,EAAK2E,MAAM2D,MAAM+B,IAAI,SAACC,EAAMC,GAM/C,OALWT,EAAUQ,KACVtC,GAAUsC,EAAKhD,KAAKuB,QAAU4B,IACvCH,EAAKhD,KAAKuB,MAAQ4B,EAClBC,GAAc,GAETJ,IAILI,GACF1K,EAAKwE,SAAS,CACZ8D,MAAO8B,GACN,WACDhD,EAAIW,OAAOC,EAAQ,CACjBa,MAAO4B,IACN9C,KAAK,WACNzB,QAAQC,IAAR,eAAAa,OAA2BgB,GAAUyC,KACpCpB,MAAM,SAAC9H,GACR2E,QAAQC,IAAI,wBAAyB5E,UAK7CqJ,eAAiB,WAAM,IAIftD,EAHYtH,EAAK2E,MAAf2D,MAGWqB,OAAO,SAACC,EAAKC,GAC9B,OAAIA,EAAQvC,KAAKwB,WAEfc,EAAIiB,iBAAmBjB,EAAIiB,iBAAiB7D,OAAO8C,EAAUD,IACtDD,IAGTA,EAAII,gBAAkBJ,EAAII,gBAAgBhD,OAAO6C,GAC1CD,IACN,CACDiB,iBAAkB,GAClBb,gBAAiB,KAInB,IAAK1C,EAAKuD,iBAAiBC,OAGzB,OAFApC,MAAM,oDACN1I,EAAK+K,cACE,EAGT/K,EAAKwE,SAAS,CACZ8D,MAAOhB,EAAK0C,iBACX,WACD/F,WAAW,WACTjE,EAAK+K,cACJ,KAEH3D,EAAIc,YAAYZ,EAAKuD,kBAAkBlD,KAAK,WAC1CzB,QAAQC,IAAR,yBAAsCmB,EAAKuD,oBAC1CxB,MAAM,SAAC9H,GACR2E,QAAQC,IAAI,wBAAyB5E,UAK3CwJ,WAAa,SAACxJ,GACZvB,EAAKwE,SAAS,CACZsB,UAAU,OAGdkF,UAAY,WACVhL,EAAKwE,SAAS,CACZsB,UAAU,wFA1MM,IAAAhF,EAAAF,KAElBwG,EAAIU,UAAUH,KAAK,SAACW,GAClB,GAAsB,iBAAlBA,EAAM2C,QAMR,OCvBO,WACb,IAAMC,EAA+C,cAA7BzI,OAAO0I,SAASC,SAClCC,EAA+C,UAA7B5I,OAAO0I,SAASC,SAClCE,EAAkB7I,OAAO0I,SAASC,SAASG,MAE/C,0DAGF,OAAOL,GAAmBG,GAAmBC,EDUnCE,GAGF9C,MAAM,mHAFNA,MAAM,yJAID,EAGTxC,QAAQC,IAAI,YAAamC,GACzBxH,EAAK0D,SAAS,CACZ8D,MAAOA,4CA+LC,IAAAmD,EAAA7K,KACJ0H,EAAU1H,KAAK+D,MAAf2D,MAER,IAAKA,IAAUA,EAAMwC,OAEnB,OAAO,KAGT,IEpO6BY,EAASC,EFsOhCC,GEtOuBF,EFoOR,KEpOiBC,EFqOtB,OEpOX,SAAU5G,EAAG8G,GAClB,IAAMC,EAAQ,IAAI7C,KAAKlE,EAAE2G,IAAUxC,UAC7B6C,EAAQ,IAAI9C,KAAK4C,EAAEH,IAAUxC,UACnC,MAAc,QAAVyC,EACKG,EAAQC,EAGVA,EAAQD,IFiOf,OAFoBxD,EAAM0D,KAAKJ,GAEZvB,IAAI,SAACC,EAAMC,GAAM,IAI9B0B,EAHI3E,EAAcgD,EAAdhD,KAAMhG,EAAQgJ,EAARhJ,IACRmI,EAAKK,EAAUQ,GAGjBhJ,IACF2K,EACEnH,EAAAC,EAAA/C,cAAA,UAAQkK,UAASzC,EAAItE,QAASsG,EAAKlC,YAAnC,WAKJ,IAAM4C,EAAW7E,EAAKwB,UAAa,mBAAqB,aACxD,OACEhE,EAAAC,EAAA/C,cAAA,OAAK2I,IAAKJ,EAAGrF,UAAU,aACrBJ,EAAAC,EAAA/C,cAAA,SAAOkD,UAAU,QACfJ,EAAAC,EAAA/C,cAAA,SACEkK,UAASzC,EACTvE,UAAU,cACVkH,KAAK,WACL7L,SAAUkL,EAAKxB,mBACfE,QAAS7C,EAAKwB,YAEhBhE,EAAAC,EAAA/C,cAAA,OAAKiF,MAAM,6BAA6BC,QAAQ,aAAahC,UAAU,cACrEJ,EAAAC,EAAA/C,cAAA,OAAKmF,UAAS,GAAAH,OAAKmF,GAAWjH,UAAU,cACxCJ,EAAAC,EAAA/C,cAAA,OAAKmF,UAAU,eAAejC,UAAU,iBAE1CJ,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,mBACbJ,EAAAC,EAAA/C,cAACqK,EAAD,CACErL,QAAQ,OACR4D,QAAS6E,EACT/H,OAAQ+J,EAAKjB,gBACbpK,KAAMkH,EAAKuB,UAKhBoD,sCAKA,IAAAK,EAAA1L,KACP,OACEkE,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,OAEbJ,EAAAC,EAAA/C,cAACuK,EAAD,MAEAzH,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,aACbJ,EAAAC,EAAA/C,cAAA,wBAEE8C,EAAAC,EAAA/C,cAACwK,EAAD,CAAcrH,QAASvE,KAAKoK,UAAW9F,UAAU,mBAEnDJ,EAAAC,EAAA/C,cAAA,QAAMkD,UAAU,sBAAsBuH,SAAU7L,KAAK2H,UACnDzD,EAAAC,EAAA/C,cAAA,SACEkD,UAAU,oBACVwH,YAAY,kBACZC,KAAK,OACLrL,IAAK,SAAAsL,GAAE,OAAIN,EAAK7D,aAAemE,GAC/BC,aAAa,MACbrG,MAAO,CAACsG,YAAa,MAEvBhI,EAAAC,EAAA/C,cAAA,OAAKkD,UAAU,gBACbJ,EAAAC,EAAA/C,cAAA,UAAQkD,UAAU,sBAAlB,eAGAJ,EAAAC,EAAA/C,cAACwK,EAAD,CAAcrH,QAASvE,KAAKoK,UAAY9F,UAAU,qBAIrDtE,KAAKmM,eAERjI,EAAAC,EAAA/C,cAACgL,EAAD,CACElH,SAAUlF,KAAK+D,MAAMmB,SACrBC,iBAAkBnF,KAAKmK,WACvB3E,qBAAsBxF,KAAKgK,yBA1SJ3I,aAiTjC,SAASmH,EAAqBd,GAE5B,OAAOA,EAAM2E,OAAO,SAAC3C,GACnB,OAAOA,EAAKhJ,MAIhB,SAASwI,EAAUQ,GACjB,OAAKA,EAAKhJ,IAGHgJ,EAAKhJ,IAAI,QAAQmI,GAFf,KG/TXyD,IAASC,OAAOrI,EAAAC,EAAA/C,cAACoL,EAAD,MAASlK,SAASmK,eAAe","file":"static/js/main.7c0eb763.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/deploy-to-netlify.4fdff352.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.726a2e11.svg\";","module.exports = __webpack_public_path__ + \"static/media/github.caf7b92e.svg\";","/* fork of https://github.com/lovasoa/react-contenteditable */\nimport React from 'react'\n\nexport default class Editable extends React.Component {\n  shouldComponentUpdate(nextProps) {\n    // We need not rerender if the change of props simply reflects the user's\n    // edits. Rerendering in this case would make the cursor/caret jump.\n    return (\n      // Rerender if there is no element yet...\n      !this.htmlEl\n      // ...or if html really changed... (programmatically, not by user edit)\n      || (nextProps.html !== this.htmlEl.innerHTML\n        && nextProps.html !== this.props.html)\n      // ...or if editing is enabled or disabled.\n      || this.props.disabled !== nextProps.disabled\n    )\n  }\n  componentDidUpdate() {\n    if (this.htmlEl && this.props.html !== this.htmlEl.innerHTML) {\n      // Perhaps React (whose VDOM gets outdated because we often prevent\n      // rerendering) did not update the DOM. So we update it manually now.\n      this.htmlEl.innerHTML = this.props.html\n    }\n  }\n  preventEnter = (evt) => {\n    if (evt.which === 13) {\n      evt.preventDefault()\n      if (!this.htmlEl) {\n        return false\n      }\n      this.htmlEl.blur()\n      return false\n    }\n  }\n  emitChange = (evt) => {\n    if (!this.htmlEl) {\n      return false\n    }\n    const html = this.htmlEl.innerHTML\n    if (this.props.onChange && html !== this.lastHtml) {\n      evt.target.value = html\n      this.props.onChange(evt, html)\n    }\n    this.lastHtml = html\n  }\n  render() {\n    const { tagName, html, onChange, ...props } = this.props\n\n    const domNodeType = tagName || 'div'\n    const elementProps = {\n      ...props,\n      ref: (e) => this.htmlEl = e,\n      onKeyDown: this.preventEnter,\n      onInput: this.emitChange,\n      onBlur: this.props.onBlur || this.emitChange,\n      contentEditable: !this.props.disabled,\n    }\n\n    let children = this.props.children\n    if (html) {\n      elementProps.dangerouslySetInnerHTML = { __html: html }\n      children = null\n    }\n    return React.createElement(domNodeType, elementProps, children)\n  }\n}\n","import React from 'react'\nimport Editable from './Editable'\nimport './ContentEditable.css'\n\nexport default class ContentEditable extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      disabled: true\n    }\n    this.hasFocused = false\n  }\n  handleClick = (e) => {\n    e.preventDefault()\n    const event = e || window.event\n    // hacks to give the contenteditable block a better UX\n    event.persist()\n    if (!this.hasFocused) {\n      const caretRange = getMouseEventCaretRange(event)\n      window.setTimeout(() => {\n        selectRange(caretRange)\n        this.hasFocused = true\n      }, 0)\n    }\n    // end hacks to give the contenteditable block a better UX\n    this.setState({\n      disabled: false\n    })\n  }\n  handleClickOutside = (evt) => {\n    const event = evt || window.event\n    // presist blur event for react\n    event.persist()\n    const value = evt.target.value || evt.target.innerText\n    this.setState({\n      disabled: true\n    }, () => {\n      this.hasFocused = false // reset single click functionality\n      if (this.props.onBlur) {\n        this.props.onBlur(evt, value)\n      }\n    })\n  }\n  render() {\n    const { onChange, children, html, editKey, tagName } = this.props\n    const content = html || children\n    return (\n      <Editable\n        tagName={tagName}\n        data-key={editKey}\n        className={'editable'}\n        onClick={this.handleClick}\n        onBlur={this.handleClickOutside}\n        html={content}\n        disabled={this.state.disabled}\n        onChange={onChange}\n      />\n    )\n  }\n}\n\nfunction getMouseEventCaretRange(event) {\n  const x = event.clientX\n  const y = event.clientY\n  let range\n\n  if (document.body.createTextRange) {\n    // IE\n    range = document.body.createTextRange()\n    range.moveToPoint(x, y)\n  } else if (typeof document.createRange !== 'undefined') {\n    // Try Firefox rangeOffset + rangeParent properties\n    if (typeof event.rangeParent !== 'undefined') {\n      range = document.createRange()\n      range.setStart(event.rangeParent, event.rangeOffset)\n      range.collapse(true)\n    } else if (document.caretPositionFromPoint) {\n      // Try the standards-based way next\n      const pos = document.caretPositionFromPoint(x, y)\n      range = document.createRange()\n      range.setStart(pos.offsetNode, pos.offset)\n      range.collapse(true)\n    } else if (document.caretRangeFromPoint) {\n      // WebKit\n      range = document.caretRangeFromPoint(x, y)\n    }\n  }\n  return range\n}\n\nfunction selectRange(range) {\n  if (range) {\n    if (typeof range.select !== 'undefined') {\n      range.select()\n    } else if (typeof window.getSelection !== 'undefined') {\n      const sel = window.getSelection()\n      sel.removeAllRanges()\n      sel.addRange(range)\n    }\n  }\n}\n","import React from 'react'\nimport deployButton from '../../assets/deploy-to-netlify.svg'\nimport logo from '../../assets/logo.svg'\nimport github from '../../assets/github.svg'\nimport styles from './AppHeader.css' // eslint-disable-line\n\nconst AppHeader = (props) => {\n  return (\n    <header className='app-header'>\n      <div className='app-title-wrapper'>\n        <div className='app-title-wrapper'>\n          <div className='app-left-nav'>\n            <img src={logo} className='app-logo' alt='logo' />\n            <div className='app-title-text'>\n              <h1 className='app-title'>Netlify + Fauna DB</h1>\n              <p className='app-intro'>\n                Using FaunaDB & Netlify functions\n              </p>\n            </div>\n          </div>\n        </div>\n        <div className='deploy-button-wrapper'>\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://app.netlify.com/start/deploy?repository=https://github.com/netlify/netlify-faunadb-example'>\n            <img src={deployButton} className='deploy-button' alt='deploy to netlify' />\n          </a>\n          <div className='view-src'>\n            <a\n              target='_blank'\n              rel='noopener noreferrer'\n              href='https://github.com/netlify/netlify-faunadb-example'>\n              <img className='github-icon' src={github} alt='view repo on github' />\n              View the source Luke\n            </a>\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n}\n\nexport default AppHeader\n","import React, { Component } from 'react'\nimport styles from './SettingsMenu.css' // eslint-disable-line\n\nexport default class Menu extends Component {\n  componentDidMount() {\n    // attach event listeners\n    document.body.addEventListener('keydown', this.handleEscKey)\n  }\n  componentWillUnmount() {\n    // remove event listeners\n    document.body.removeEventListener('keydown', this.handleEscKey)\n  }\n  handleEscKey = (e) => {\n    if (this.props.showMenu && e.which === 27) {\n      this.props.handleModalClose()\n    }\n  }\n  handleDelete = (e) => {\n    e.preventDefault()\n    const deleteConfirm = window.confirm(\"Are you sure you want to clear all completed todos?\");\n    if (deleteConfirm) {\n      console.log('delete')\n      this.props.handleClearCompleted()\n    }\n  }\n  render() {\n    const { showMenu } = this.props\n    const showOrHide = (showMenu) ? 'flex' : 'none'\n    return (\n      <div className='settings-wrapper' style={{display: showOrHide}}>\n        <div className='settings-content'>\n          <span className='settings-close' onClick={this.props.handleModalClose} role=\"img\" aria-label='close'>\n            ❌\n          </span>\n          <h2>Settings</h2>\n          <div className='settings-section' onClick={this.handleDelete}>\n            <button className='btn-danger'>\n              Clear All Completed Todos\n            </button>\n          </div>\n          <div className='settings-section' style={{display: 'none'}}>\n            <div className='settings-header'>Sort Todos:</div>\n            <div className='settings-options-wrapper' data-setting='sortOrder'>\n              <div\n                className='settings-option'\n                onClick={this.changeSetting}\n                data-value='desc'>\n                Oldest First ▼\n              </div>\n              <div\n                className='settings-option'\n                onClick={this.changeSetting}\n                data-value='asc'>\n                Most Recent First ▲\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport styles from './SettingIcon.css' // eslint-disable-line\n\nconst SettingIcon = (props) => {\n  const className = props.className || ''\n  return (\n    <span onClick={props.onClick} className={`setting-toggle-wrapper ${className}`}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 125\" className=\"settings-toggle\">\n        <use xlinkHref=\"#settings\" className=\"settings-gear\"></use>\n      </svg>\n    </span>\n  )\n}\n\nexport default SettingIcon\n","/* Api methods to call /functions */\n\nconst create = (data) => {\n  return fetch('/.netlify/functions/todos-create', {\n    body: JSON.stringify(data),\n    method: 'POST'\n  }).then(response => {\n    return response.json()\n  })\n}\n\nconst readAll = () => {\n  return fetch('/.netlify/functions/todos-read-all').then((response) => {\n    return response.json()\n  })\n}\n\nconst update = (todoId, data) => {\n  return fetch(`/.netlify/functions/todos-update/${todoId}`, {\n    body: JSON.stringify(data),\n    method: 'POST'\n  }).then(response => {\n    return response.json()\n  })\n}\n\nconst deleteTodo = (todoId) => {\n  return fetch(`/.netlify/functions/todos-delete/${todoId}`, {\n    method: 'POST',\n  }).then(response => {\n    return response.json()\n  })\n}\n\nconst batchDeleteTodo = (todoIds) => {\n  return fetch(`/.netlify/functions/todos-delete-batch`, {\n    body: JSON.stringify({\n      ids: todoIds\n    }),\n    method: 'POST'\n  }).then(response => {\n    return response.json()\n  })\n}\n\nexport default {\n  create: create,\n  readAll: readAll,\n  update: update,\n  delete: deleteTodo,\n  batchDelete: batchDeleteTodo\n}\n","import React, { Component } from 'react'\nimport ContentEditable from './components/ContentEditable'\nimport AppHeader from './components/AppHeader'\nimport SettingsMenu from './components/SettingsMenu'\nimport SettingsIcon from './components/SettingsIcon'\nimport api from './utils/api'\nimport sortByDate from './utils/sortByDate'\nimport isLocalHost from './utils/isLocalHost'\nimport './App.css'\n\nexport default class App extends Component {\n  state = {\n    todos: [],\n    showMenu: false\n  }\n  componentDidMount() {\n    // Fetch all todos\n    api.readAll().then((todos) => {\n      if (todos.message === 'unauthorized') {\n        if (isLocalHost()) {\n          alert('FaunaDB key is not unauthorized. Make sure you set it in terminal session where you ran `npm start`. Visit http://bit.ly/set-fauna-key for more info')\n        } else {\n          alert('FaunaDB key is not unauthorized. Verify the key `FAUNADB_SECRET` set in Netlify enviroment variables is correct')\n        }\n        return false\n      }\n\n      console.log('all todos', todos)\n      this.setState({\n        todos: todos\n      })\n    })\n  }\n  saveTodo = (e) => {\n    e.preventDefault()\n    const { todos } = this.state\n    const todoValue = this.inputElement.value\n\n    if (!todoValue) {\n      alert('Please add Todo title')\n      this.inputElement.focus()\n      return false\n    }\n\n    // reset input to empty\n    this.inputElement.value = ''\n\n    const todoInfo = {\n      title: todoValue,\n      completed: false,\n    }\n    // Optimistically add todo to UI\n    const newTodoArray = [{\n      data: todoInfo,\n      ts: new Date().getTime() * 10000\n    }]\n\n    const optimisticTodoState = newTodoArray.concat(todos)\n\n    this.setState({\n      todos: optimisticTodoState\n    })\n    // Make API request to create new todo\n    api.create(todoInfo).then((response) => {\n      console.log(response)\n      // remove temporaryValue from state and persist API response\n      const persistedState = removeOptimisticTodo(todos).concat(response)\n      // Set persisted value to state\n      this.setState({\n        todos: persistedState\n      })\n    }).catch((e) => {\n      console.log('An API error occurred', e)\n      const revertedState = removeOptimisticTodo(todos)\n      // Reset to original state\n      this.setState({\n        todos: revertedState\n      })\n    })\n  }\n  deleteTodo = (e) => {\n    const { todos } = this.state\n    const todoId = e.target.dataset.id\n\n    // Optimistically remove todo from UI\n    const filteredTodos = todos.reduce((acc, current) => {\n      const currentId = getTodoId(current)\n      if (currentId === todoId) {\n        // save item being removed for rollback\n        acc.rollbackTodo = current\n        return acc\n      }\n      // filter deleted todo out of the todos list\n      acc.optimisticState = acc.optimisticState.concat(current)\n      return acc\n    }, {\n      rollbackTodo: {},\n      optimisticState: []\n    })\n\n    this.setState({\n      todos: filteredTodos.optimisticState\n    })\n\n    // Make API request to delete todo\n    api.delete(todoId).then(() => {\n      console.log(`deleted todo id ${todoId}`)\n    }).catch((e) => {\n      console.log(`There was an error removing ${todoId}`, e)\n      // Add item removed back to list\n      this.setState({\n        todos: filteredTodos.optimisticState.concat(filteredTodos.rollbackTodo)\n      })\n    })\n  }\n  handleTodoCheckbox = (event) => {\n    const { todos } = this.state\n    const { target } = event\n    const todoCompleted = target.checked\n    const todoId = target.dataset.id\n\n    const updatedTodos = todos.map((todo, i) => {\n      const { data } = todo\n      const id = getTodoId(todo)\n      if (id === todoId && data.completed !== todoCompleted) {\n        data.completed = todoCompleted\n      }\n      return todo\n    })\n\n    this.setState({\n      todos: updatedTodos\n    }, () => {\n      api.update(todoId, {\n        completed: todoCompleted\n      }).then(() => {\n        console.log(`update todo ${todoId}`, todoCompleted)\n      }).catch((e) => {\n        console.log('An API error occurred', e)\n      })\n    })\n  }\n  updateTodoTitle = (event, currentValue) => {\n    let isDifferent = false\n    const todoId = event.target.dataset.key\n\n    const updatedTodos = this.state.todos.map((todo, i) => {\n      const id = getTodoId(todo)\n      if (id === todoId && todo.data.title !== currentValue) {\n        todo.data.title = currentValue\n        isDifferent = true\n      }\n      return todo\n    })\n\n    // only set state if input different\n    if (isDifferent) {\n      this.setState({\n        todos: updatedTodos\n      }, () => {\n        api.update(todoId, {\n          title: currentValue\n        }).then(() => {\n          console.log(`update todo ${todoId}`, currentValue)\n        }).catch((e) => {\n          console.log('An API error occurred', e)\n        })\n      })\n    }\n  }\n  clearCompleted = () => {\n    const { todos } = this.state\n\n    // Optimistically remove todos from UI\n    const data = todos.reduce((acc, current) => {\n      if (current.data.completed) {\n        // save item being removed for rollback\n        acc.completedTodoIds = acc.completedTodoIds.concat(getTodoId(current))\n        return acc\n      }\n      // filter deleted todo out of the todos list\n      acc.optimisticState = acc.optimisticState.concat(current)\n      return acc\n    }, {\n      completedTodoIds: [],\n      optimisticState: []\n    })\n\n    // only set state if completed todos exist\n    if (!data.completedTodoIds.length) {\n      alert('Please check off some todos to batch remove them')\n      this.closeModal()\n      return false\n    }\n\n    this.setState({\n      todos: data.optimisticState\n    }, () => {\n      setTimeout(() => {\n        this.closeModal()\n      }, 600)\n\n      api.batchDelete(data.completedTodoIds).then(() => {\n        console.log(`Batch removal complete`, data.completedTodoIds)\n      }).catch((e) => {\n        console.log('An API error occurred', e)\n      })\n    })\n\n  }\n  closeModal = (e) => {\n    this.setState({\n      showMenu: false\n    })\n  }\n  openModal = () => {\n    this.setState({\n      showMenu: true\n    })\n  }\n  renderTodos() {\n    const { todos } = this.state\n\n    if (!todos || !todos.length) {\n      // Loading State here\n      return null\n    }\n\n    const timeStampKey = 'ts'\n    const orderBy = 'desc' // or `asc`\n    const sortOrder = sortByDate(timeStampKey, orderBy)\n    const todosByDate = todos.sort(sortOrder)\n\n    return todosByDate.map((todo, i) => {\n      const { data, ref } = todo\n      const id = getTodoId(todo)\n      // only show delete button after create API response returns\n      let deleteButton\n      if (ref) {\n        deleteButton = (\n          <button data-id={id} onClick={this.deleteTodo}>\n            delete\n          </button>\n        )\n      }\n      const boxIcon = (data.completed) ? '#todo__box__done' : '#todo__box'\n      return (\n        <div key={i} className='todo-item'>\n          <label className=\"todo\">\n            <input\n              data-id={id}\n              className=\"todo__state\"\n              type=\"checkbox\"\n              onChange={this.handleTodoCheckbox}\n              checked={data.completed}\n            />\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 25\" className=\"todo__icon\">\n              <use xlinkHref={`${boxIcon}`} className=\"todo__box\"></use>\n              <use xlinkHref=\"#todo__check\" className=\"todo__check\"></use>\n            </svg>\n            <div className='todo-list-title'>\n              <ContentEditable\n                tagName='span'\n                editKey={id}\n                onBlur={this.updateTodoTitle} // save on enter/blur\n                html={data.title}\n                // onChange={this.handleDataChange} // save on change\n              />\n            </div>\n          </label>\n          {deleteButton}\n        </div>\n      )\n    })\n  }\n  render() {\n    return (\n      <div className='app'>\n\n        <AppHeader />\n\n        <div className='todo-list'>\n          <h2>\n            Create todo\n            <SettingsIcon onClick={this.openModal} className='mobile-toggle' />\n          </h2>\n          <form className='todo-create-wrapper' onSubmit={this.saveTodo}>\n            <input\n              className='todo-create-input'\n              placeholder='Add a todo item'\n              name='name'\n              ref={el => this.inputElement = el}\n              autoComplete='off'\n              style={{marginRight: 20}}\n            />\n            <div className='todo-actions'>\n              <button className='todo-create-button'>\n                Create todo\n              </button>\n              <SettingsIcon onClick={this.openModal}  className='desktop-toggle' />\n            </div>\n          </form>\n\n          {this.renderTodos()}\n        </div>\n        <SettingsMenu\n          showMenu={this.state.showMenu}\n          handleModalClose={this.closeModal}\n          handleClearCompleted={this.clearCompleted}\n        />\n      </div>\n    )\n  }\n}\n\nfunction removeOptimisticTodo(todos) {\n  // return all 'real' todos\n  return todos.filter((todo) => {\n    return todo.ref\n  })\n}\n\nfunction getTodoId(todo) {\n  if (!todo.ref) {\n    return null\n  }\n  return todo.ref['@ref'].id\n}\n","\nexport default function isLocalHost() {\n  const isLocalhostName = window.location.hostname === 'localhost';\n  const isLocalhostIPv6 = window.location.hostname === '[::1]';\n  const isLocalhostIPv4 = window.location.hostname.match(\n    // 127.0.0.1/8\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  );\n\n  return isLocalhostName || isLocalhostIPv6 || isLocalhostIPv4;\n}\n","export default function sortDate(dateKey, order) {\n  return function (a, b) {\n    const timeA = new Date(a[dateKey]).getTime()\n    const timeB = new Date(b[dateKey]).getTime()\n    if (order === 'asc') {\n      return timeA - timeB\n    }\n    // default 'desc' descending order\n    return timeB - timeA\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}